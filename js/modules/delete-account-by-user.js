import{url}from"../helpers/urls.js";import{deleteAccountForm}from"../helpers/locatores.js";const{form:form,account:account,phoneNumber:phoneNumber,password:password,alertEmail:alertEmail,alertPhoneNumber:alertPhoneNumber,alertPassword:alertPassword}=deleteAccountForm,getUserAccounts=()=>JSON.parse(sessionStorage.getItem("account"))||[],getCurrentAccount=()=>JSON.parse(sessionStorage.getItem("current_user")),deleteAccount=(e,t,r,a,s,o)=>{const l=JSON.parse(sessionStorage.getItem("account"))||[],n=JSON.parse(sessionStorage.getItem("current_user")),c=l.findIndex((e=>e.email===n)),u=l[c].password,m=l[c].phoneNumber;e.value===n&&t.value===m&&r.value===u&&(localStorage.removeItem(n),localStorage.removeItem(`purchased_${n}`),localStorage.removeItem(`updated_stock_${n}`),localStorage.removeItem(`msg_${n}`),sessionStorage.removeItem("current_user"),l.splice(c,1),sessionStorage.setItem("account",JSON.stringify(l)),form.reset(),location.href=url.log_in),e.value!==n&&""!==e.value&&(a.classList.add("alert-text"),a.innerText="Incorrect email",e.classList.add("alert-input")),t.value!==m&&""!==t.value&&(s.classList.add("alert-text"),s.innerText="Incorrect phone number",t.classList.add("alert-input")),r.value!==u&&""!==r.value&&(o.classList.add("alert-text"),o.innerText="Incorrect password",r.classList.add("alert-input"))};form.addEventListener("submit",(e=>{e.preventDefault(),deleteAccount(account,phoneNumber,password,alertEmail,alertPhoneNumber,alertPassword)}));