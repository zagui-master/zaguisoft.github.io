import{deleteAccountByAdminForm}from"../helpers/locatores.js";import{admin}from"../data/admins.js";import{showUserAccountsInAdmin}from"./show-user-accounts-in-admin.js";const{form:form,userAccount:userAccount,adminAccount:adminAccount,password:password,alertUserAccount:alertUserAccount,alertAdminAccount:alertAdminAccount,alertPassword:alertPassword}=deleteAccountByAdminForm,hideModal=()=>{document.getElementById("modal_delete_user_account_by_admin").classList.remove("show-modal")},canceldeleteAccount=()=>{document.getElementById("btn_cancel").addEventListener("click",(()=>{form.reset(),hideModal()}))},ShowModal=e=>{const t=document.getElementById("modal_delete_user_account_by_admin");document.getElementById("section_accounts_in_admin").addEventListener("click",(s=>{if(s.target.closest(".btn-delete-account")){const n=s.composedPath()[1].childNodes[1].childNodes[3].innerText;return t.classList.add("show-modal"),e.value=n,e}}))},getUserAccounts=()=>JSON.parse(sessionStorage.getItem("account"))||[],getCurrentUser=()=>JSON.parse(sessionStorage.getItem("current_user"))||[],deleteUserAccount=()=>{const e=JSON.parse(sessionStorage.getItem("account"))||[],t=e.findIndex((e=>e.email===userAccount.value));-1!==t?(localStorage.removeItem(userAccount.value),localStorage.removeItem(`updated_stock_${userAccount.value}`),localStorage.removeItem(`purchased_${userAccount.value}`),localStorage.removeItem(`msg_${userAccount.value}`),e.splice(t,1),sessionStorage.setItem("account",JSON.stringify(e)),showUserAccountsInAdmin(),hideModal()):(alertUserAccount.innerText="User account not found.",alertUserAccount.classList.add("alert-text"),userAccount.classList.add("alert-input"))},validateAdmin=(e,t,s,n,o)=>{const c=JSON.parse(sessionStorage.getItem("current_user"))||[];if(t.value===c){const t=e.find((e=>e.account===c)).password;s.value===t&&deleteUserAccount(),s.value!==t&&(o.innerText="Wrong admin password.",o.classList.add("alert-text"),s.classList.add("alert-input"))}t.value!==c&&(n.innerText="Wrong admin account.",n.classList.add("alert-text"),t.classList.add("alert-input"))};form.addEventListener("submit",(e=>{e.preventDefault(),validateAdmin(admin,adminAccount,password,alertAdminAccount,alertPassword)})),ShowModal(userAccount),document.getElementById("btn_cancel").addEventListener("click",(()=>{form.reset(),hideModal()}));